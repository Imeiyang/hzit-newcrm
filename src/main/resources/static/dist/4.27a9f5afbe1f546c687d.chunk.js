webpackJsonp([4],{48:function(e,t,a){a(70);var o=a(17)(a(60),a(76),null,null);o.options.__file="J:\\VUE资料\\iview学习\\demo\\src\\views\\grant\\role\\role.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] role.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},60:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this;return{roleColumn:[{type:"selection",width:60,align:"center"},{title:"角色",key:"role",width:100},{title:"可用",key:"available",align:"center",width:70,render:function(e,t){var a=void 0,o=void 0;return"0"==t.row.available?(o="close-circled",a="red"):"1"==t.row.available&&(o="checkmark-circled",a="green"),e("Icon",{props:{type:o,size:16,color:a}})}},{title:"录入人",key:"createByMsg",align:"center",width:100},{title:"录入时间",key:"createTime",render:function(e,t){var a="暂无";return null!=t.row.createTime&&(a=new Date(parseInt(t.row.createTime)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")+"  "),e("div",[e("Icon",{props:{type:"ios-time-outline"}}),e("span",{},a)])},width:180},{title:"修改人",key:"updateByMsg",width:100,align:"center"},{title:"修改时间",key:"updateTime",render:function(e,t){var a="暂无";return null!=t.row.updateTime&&(a=new Date(parseInt(t.row.updateTime)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")+"  "),e("div",[e("Icon",{props:{type:"ios-time-outline"}}),e("span",{},a)])},width:180},{title:"描述",key:"description",ellipsis:!0},{title:"操作",key:"operate",width:150,render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small",icon:"ios-search-strong",shape:"circle"},style:{marginRight:"5px"},on:{click:function(){e.show(a.index)}},nativeOn:{mouseenter:function(){e.$Message.info("显示数据!")}}}),t("Button",{props:{type:"success",size:"small",icon:"android-settings",shape:"circle"},style:{marginRight:"5px"},on:{click:function(){e.grant(a.index)}},nativeOn:{mouseenter:function(){e.$Message.info("角色授权!")}}}),t("Button",{props:{type:"warning",icon:"edit",size:"small",shape:"circle"},style:{marginRight:"5px"},on:{click:function(){e.etitRole(a.index)}},nativeOn:{mouseenter:function(){e.$Message.info("修改角色!")}}}),t("Button",{props:{type:"error",size:"small",icon:"trash-a",shape:"circle"},on:{click:function(){e.remove(a.index)}},nativeOn:{mouseenter:function(){e.$Message.info("删除角色!")}}})])}}],roleData:[],roleTotal:0,pageSize:15,currentPage:1,roleName:""}},mounted:function(){this.getAjaxData(0,this.pageSize,this.roleName)},methods:{getData:function(){},changePage:function(e){this.getAjaxData(e,this.pageSize,this.roleName),this.currentPage=e},changeSize:function(e){this.pageSize=e,this.getAjaxData(this.currentPage,e,this.roleName)},getAjaxData:function(e,t,a){var o=this;o.$Message.loading({content:"正在拼命加载数据...",top:300,duration:30}),this.$axios.get("http://localhost:8090/role/getRoleList?limit="+e+"&size="+t+"&roleName="+a).then(function(e){o.roleData=e.data.rows,o.roleTotal=e.data.total,o.$Message.destroy()})},addRole:function(){this.$router.push("/manager/role/addRole")},show:function(e){var t="";t="0"==this.roleData[e].available?"禁用":"启用";var a="暂无";null!=this.roleData[e].createTime&&(a=new Date(parseInt(this.roleData[e].createTime)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," "));var o="暂无";null!=this.roleData[e].updateTime&&(o=new Date(parseInt(this.roleData[e].updateTime)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," "));var i=this.roleData[e].updateByMsg;i=null==i?"暂无":i;var n=this.roleData[e].createByMsg;n=null==n?"暂无":n,this.$Modal.info({title:"角色信息",content:"<p>角色:"+this.roleData[e].role+"</p>\n                 <p>可用:"+t+"</p>\n                 <p>录入人:"+n+"</p>\n                 <p>录入时间:"+a+"</p>\n                 <p>修改人:"+i+"</p>\n                 <p>修改时间:"+o+"</p>\n                 <p>描述:"+this.roleData[e].description+"</p>\n                 "})},grant:function(e){},etitRole:function(e){this.$router.push({path:"/manager/role/editRole",query:{roleId:this.roleData[e].id}})},remove:function(e){var t=this;t.$Modal.confirm({title:"确认操作",content:"<h2>是否删除该数据!</h2>",loading:!0,onOk:function(){var a=t.roleData[e].id;t.$axios.get("http://localhost:8090/role/removeRole?roleId="+a).then(function(a){console.log(a),600===a.data.code?(t.$Modal.remove(),t.success(a.data.msg),t.roleData.splice(e,1)):t.error(a.data.msg)})},onCancel:function(){t.$Message.info("取消删除数据!")}})},search:function(){this.getAjaxData(0,this.pageSize,this.roleName)},refresh:function(){this.roleName="",this.getAjaxData(0,this.pageSize,"")},success:function(e){this.$Notice.success({title:"处理结果",desc:e})},error:function(e){this.$Notice.error({title:"处理结果",desc:e})}}}},70:function(e,t){},76:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"role"}},[a("div",{staticClass:"toolbar"},[a("Button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:e.addRole}},[e._v("添加")]),e._v(" "),a("Button",{attrs:{size:"small",type:"success",icon:"android-settings"}},[e._v("批量授权")]),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入角色名搜索!"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}}),e._v(" "),a("Button",{attrs:{size:"small",type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{attrs:{size:"small",type:"warning",icon:"ios-refresh-empty"},on:{click:e.refresh}},[e._v("刷新")])],1),e._v(" "),a("Table",{attrs:{border:"",stripe:"",columns:e.roleColumn,"highlight-row":!0,data:e.roleData}}),e._v(" "),a("div",{staticStyle:{margin:"10px"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.roleTotal,placement:"top","show-sizer":"","show-elevator":"","page-size":15,"page-size-opts":[5,10,15,30,50]},on:{"on-change":e.changePage,"on-page-size-change":e.changeSize}})],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});